<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Purple-Juice-4073 â€” NSFW Voice Artist Audio Masterlist. 18+ Only.">
    <meta name="theme-color" content="#6d28d9">
    <title>Purple-Juice-4073 | Audio Masterlist</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Shippori+Mincho:wght@400;500;600;700;800&family=Zen+Kaku+Gothic+New:wght@300;400;500;700&family=Noto+Serif+JP:wght@300;400;600&family=Atkinson+Hyperlegible:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
    <link href="https://fonts.cdnfonts.com/css/opendyslexic" rel="stylesheet">

    <style>
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       CSS VARIABLES
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    :root {
        --ink:            #0a0712;
        --void:           #120d1f;
        --abyss:          #1c1030;
        --shadow-plum:    #2d1b52;
        --deep-violet:    #4a1fa8;
        --royal-purple:   #6d28d9;
        --amethyst:       #8b5cf6;
        --wisteria:       #a78bfa;
        --lavender:       #c4b5fd;
        --pale-lilac:     #ddd6fe;
        --moonmist:       #ede9fe;
        --petal-white:    #faf8ff;
        --snow:           #ffffff;

        --glow-deep:  rgba(109,40,217,0.55);
        --glow-soft:  rgba(167,139,250,0.35);
        --glow-petal: rgba(196,181,253,0.15);

        --font-display: 'Shippori Mincho', serif;
        --font-body:    'Zen Kaku Gothic New', sans-serif;
        --font-accent:  'Noto Serif JP', serif;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       RESET
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    *, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
    html { scroll-behavior: smooth; }

    body {
        font-family: var(--font-body);
        background: var(--ink);
        color: var(--pale-lilac);
        min-height: 100vh;
        overflow-x: hidden;
    }

    /* Font overrides (accessibility) */
    body.font-arial    { font-family: Arial, sans-serif !important; }
    body.font-times    { font-family: 'Times New Roman', serif !important; }
    body.font-atkinson { font-family: 'Atkinson Hyperlegible', sans-serif !important; }
    body.font-dyslexic { font-family: 'OpenDyslexic', sans-serif !important; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       BACKGROUND
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .geo-bg {
        position: fixed; inset: 0; z-index: -3;
        background: linear-gradient(160deg, var(--abyss) 0%, var(--void) 40%, var(--ink) 100%);
    }
    .geo-canvas { position: fixed; inset: 0; z-index: -2; opacity: 0.72; pointer-events: none; }
    .sakura-container { position: fixed; inset: 0; z-index: -1; pointer-events: none; overflow: hidden; }
    .petal {
        position: absolute; top: -30px; opacity: 0;
        animation: petalFall linear infinite;
        border-radius: 50% 0 50% 0;
    }
    @keyframes petalFall {
        0%   { opacity:0;    transform: translateY(0)      translateX(0)              rotate(0deg)   scale(0.85); }
        6%   { opacity:0.85; }
        50%  { transform: translateY(52vh)   translateX(calc(var(--drift, 40px) * 0.5))  rotate(240deg) scale(1);    }
        93%  { opacity:0.4; }
        100% { opacity:0;    transform: translateY(112vh)  translateX(var(--drift, 40px)) rotate(760deg) scale(0.9); }
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       AGE GATE
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .age-overlay {
        position: fixed; inset: 0; z-index: 9999;
        background: rgba(10,7,18,0.98);
        display: flex; align-items: center; justify-content: center;
        backdrop-filter: blur(14px);
    }
    .age-overlay.hidden { display: none; }
    .age-modal {
        background: linear-gradient(145deg,rgba(45,27,82,0.96),rgba(18,13,31,0.99));
        border: 1px solid rgba(139,92,246,0.4);
        border-radius: 28px; padding: 3.5rem 3rem;
        max-width: 460px; width: 92%; text-align: center;
        box-shadow: 0 0 0 1px rgba(196,181,253,0.1),0 0 80px rgba(109,40,217,0.4),0 30px 80px rgba(0,0,0,0.6);
        animation: modalIn 0.45s cubic-bezier(0.34,1.56,0.64,1) forwards;
    }
    @keyframes modalIn {
        from { opacity:0; transform:scale(0.85) translateY(30px); }
        to   { opacity:1; transform:scale(1) translateY(0); }
    }
    .age-kamon { font-size:3rem; margin-bottom:1rem; filter:drop-shadow(0 0 14px rgba(167,139,250,0.8)); }
    .age-subtitle { font-family:var(--font-accent); font-size:0.72rem; letter-spacing:0.35em; color:var(--wisteria); margin-bottom:1rem; text-transform:uppercase; }
    .age-modal h2 { font-family:var(--font-display); font-size:2rem; font-weight:700; color:var(--petal-white); margin-bottom:0.4rem; }
    .age-divider { width:60px; height:1px; background:linear-gradient(90deg,transparent,var(--amethyst),transparent); margin:1.2rem auto 1.8rem; }
    .age-modal p { font-size:0.95rem; line-height:1.8; color:var(--lavender); margin-bottom:2rem; }
    .age-modal p strong { color:var(--wisteria); }
    .age-buttons { display:flex; gap:1rem; justify-content:center; }
    .btn-proceed {
        padding:0.85rem 2.5rem; background:linear-gradient(135deg,var(--royal-purple),var(--amethyst));
        color:var(--snow); border:none; border-radius:40px;
        font-family:var(--font-body); font-size:0.95rem; font-weight:700; letter-spacing:0.08em;
        cursor:pointer; transition:all 0.3s; box-shadow:0 0 25px rgba(109,40,217,0.5);
    }
    .btn-proceed:hover { transform:translateY(-3px); box-shadow:0 0 45px rgba(139,92,246,0.7); }
    .btn-leave {
        padding:0.85rem 2rem; background:transparent; color:var(--lavender);
        border:1px solid rgba(139,92,246,0.35); border-radius:40px;
        font-family:var(--font-body); font-size:0.95rem; cursor:pointer; transition:all 0.3s;
    }
    .btn-leave:hover { border-color:var(--amethyst); background:rgba(139,92,246,0.12); }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       HEADER
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    header {
        padding: 1.4rem 2.5rem;
        border-bottom: 1px solid rgba(139,92,246,0.2);
        backdrop-filter: blur(16px);
        background: rgba(10,7,18,0.82);
        position: static;
    }
    .header-content {
        max-width: 1800px; margin: 0 auto;
        display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 1.2rem;
    }
    .logo { display:flex; align-items:center; gap:1rem; text-decoration:none; }
    .logo-icon {
        width:46px; height:46px;
        background:linear-gradient(135deg,var(--royal-purple),var(--wisteria));
        border-radius:12px; display:flex; align-items:center; justify-content:center; font-size:1.4rem;
        box-shadow:0 0 20px var(--glow-deep);
    }
    .logo-text { display:flex; flex-direction:column; }
    .logo-title {
        font-family:var(--font-display); font-size:1.35rem; font-weight:700;
        background:linear-gradient(135deg,var(--petal-white) 0%,var(--lavender) 50%,var(--wisteria) 100%);
        -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;
        letter-spacing:0.04em; line-height:1.1;
    }
    .logo-sub { font-family:var(--font-accent); font-size:0.62rem; letter-spacing:0.28em; color:var(--amethyst); text-transform:uppercase; }
    .search-container { position:relative; width:100%; max-width:380px; }
    .search-icon { position:absolute; left:1.1rem; top:50%; transform:translateY(-50%); color:var(--amethyst); pointer-events:none; font-size:0.95rem; }
    .search-input {
        width:100%; padding:0.82rem 1.2rem 0.82rem 3rem;
        background:rgba(45,27,82,0.45); border:1px solid rgba(139,92,246,0.35);
        border-radius:50px; color:var(--petal-white); font-family:var(--font-body); font-size:0.9rem;
        transition:all 0.3s; outline:none;
    }
    .search-input::placeholder { color:rgba(196,181,253,0.45); }
    .search-input:focus { border-color:var(--amethyst); background:rgba(45,27,82,0.7); box-shadow:0 0 20px var(--glow-soft); }

    /* â”€â”€â”€ Tag autocomplete dropdown â”€â”€â”€ */
    .search-suggestions {
        position:absolute; top:calc(100% + 6px); left:0; right:0; z-index:500;
        background:rgba(22,13,40,0.97); border:1px solid rgba(139,92,246,0.4);
        border-radius:14px; padding:0.4rem; list-style:none;
        box-shadow:0 12px 40px rgba(0,0,0,0.5), 0 0 0 1px rgba(196,181,253,0.06);
        backdrop-filter:blur(16px); max-height:260px; overflow-y:auto;
        display:none;
        scrollbar-width:thin; scrollbar-color:rgba(139,92,246,0.4) transparent;
    }
    .search-suggestions.open { display:block; animation:suggestIn 0.15s ease; }
    @keyframes suggestIn {
        from { opacity:0; transform:translateY(-6px); }
        to   { opacity:1; transform:translateY(0); }
    }
    .suggest-item {
        display:flex; align-items:center; gap:0.6rem;
        padding:0.5rem 0.8rem; border-radius:9px; cursor:pointer;
        font-size:0.8rem; color:var(--lavender); transition:all 0.15s;
        white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    .suggest-item:hover, .suggest-item.focused {
        background:rgba(139,92,246,0.22); color:var(--petal-white);
    }
    .suggest-item .suggest-icon { font-size:0.65rem; color:var(--amethyst); flex-shrink:0; }
    .suggest-item em { font-style:normal; color:var(--wisteria); font-weight:700; }
    .suggest-count {
        margin-left:auto; font-size:0.65rem; color:rgba(167,139,250,0.5);
        background:rgba(74,31,168,0.3); border-radius:8px; padding:0.1rem 0.45rem; flex-shrink:0;
    }

    /* â”€â”€â”€ Active tag chip below search â”€â”€â”€ */
    .active-tag-bar {
        display:flex; align-items:center; gap:0.5rem; flex-wrap:wrap;
        padding:0.5rem 1.1rem 0; min-height:0; transition:all 0.2s;
    }
    .active-tag-bar:empty { padding:0; }
    .active-tag-label { font-size:0.68rem; color:rgba(167,139,250,0.5); letter-spacing:0.06em; }
    .active-tag-chip {
        display:inline-flex; align-items:center; gap:0.4rem;
        padding:0.25rem 0.5rem 0.25rem 0.75rem;
        background:linear-gradient(135deg,rgba(109,40,217,0.45),rgba(139,92,246,0.32));
        border:1px solid rgba(167,139,250,0.5); border-radius:20px;
        font-size:0.73rem; color:var(--petal-white); font-weight:600;
        animation:chipIn 0.2s cubic-bezier(0.34,1.56,0.64,1);
    }
    @keyframes chipIn {
        from { opacity:0; transform:scale(0.7); }
        to   { opacity:1; transform:scale(1); }
    }
    .active-tag-chip button {
        background:none; border:none; cursor:pointer; color:var(--wisteria);
        font-size:0.75rem; padding:0; line-height:1; display:flex; align-items:center;
        transition:color 0.15s;
    }
    .active-tag-chip button:hover { color:var(--petal-white); }
    .header-right { display:flex; align-items:center; gap:0.75rem; flex-wrap:wrap; }
    .header-socials { display:flex; gap:0.45rem; }
    .social-icon {
        width:38px; height:38px; border-radius:50%;
        background:rgba(74,31,168,0.3); border:1px solid rgba(139,92,246,0.3);
        display:flex; align-items:center; justify-content:center;
        text-decoration:none; color:var(--lavender); transition:all 0.3s;
        overflow:hidden;
    }
    .social-icon svg { width:20px; height:20px; flex-shrink:0; transition:transform 0.3s; }
    .social-icon:hover { transform:translateY(-3px); }
    .social-icon:hover svg { transform:scale(1.1); }

    /* Brand-specific colours */
    .social-reddit:hover  { background:#FF4500; border-color:#FF4500; box-shadow:0 6px 20px rgba(255,69,0,0.45); }
    .social-twitter:hover { background:#000;    border-color:#555;    color:#fff; box-shadow:0 6px 20px rgba(0,0,0,0.5); }
    .social-discord:hover { background:#5865F2; border-color:#5865F2; color:#fff; box-shadow:0 6px 20px rgba(88,101,242,0.5); }
    .social-kofi:hover    { background:#FF5E5B; border-color:#FF5E5B; color:#fff; box-shadow:0 6px 20px rgba(255,94,91,0.45); }
    .social-bluesky:hover { background:#0085FF; border-color:#0085FF; color:#fff; box-shadow:0 6px 20px rgba(0,133,255,0.45); }
    .social-throne:hover  { background:#a855f7; border-color:#a855f7; color:#fff; box-shadow:0 6px 20px rgba(168,85,247,0.5); }

    /* Reddit SVG class-based colouring */
    .social-reddit .reddit-bg { fill:rgba(139,92,246,0); transition:fill 0.3s; }
    .social-reddit .reddit-fg { fill:var(--lavender); transition:fill 0.3s; }
    .social-reddit:hover .reddit-bg { fill:#FF4500; }
    .social-reddit:hover .reddit-fg { fill:#ffffff; }
    .accessibility-btn {
        width:36px; height:36px; border-radius:50%;
        background:rgba(74,31,168,0.3); border:1px solid rgba(139,92,246,0.3);
        display:flex; align-items:center; justify-content:center;
        cursor:pointer; color:var(--lavender); font-size:0.82rem; font-weight:700;
        transition:all 0.3s; font-family:var(--font-body);
    }
    .accessibility-btn:hover { background:rgba(139,92,246,0.3); border-color:var(--amethyst); color:var(--snow); }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       MAIN LAYOUT
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .main-container { display:flex; max-width:1800px; margin:0 auto; padding:2rem; gap:2rem; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SIDEBAR
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .sidebar {
        /* Fluid width: grows with font size, never collapses below 200px or exceeds 340px */
        width: clamp(200px, 18em, 340px);
        flex-shrink: 0;
        position: sticky;
        top: 1.5rem;
        /* Cap height so it never taller than the viewport and scrolls internally */
        max-height: calc(100vh - 3rem);
        display: flex;
        flex-direction: column;
    }
    .nav-panel {
        background:linear-gradient(180deg,rgba(45,27,82,0.55) 0%,rgba(18,13,31,0.88) 100%);
        border:1px solid rgba(139,92,246,0.22); border-radius:20px; padding:1.5rem;
        backdrop-filter:blur(12px);
        overflow-y: auto;
        flex: 1;
        /* Smooth scrollbar */
        scrollbar-width: thin;
        scrollbar-color: rgba(139,92,246,0.4) transparent;
    }
    .nav-panel::-webkit-scrollbar { width: 4px; }
    .nav-panel::-webkit-scrollbar-track { background: transparent; }
    .nav-panel::-webkit-scrollbar-thumb { background: rgba(139,92,246,0.35); border-radius: 4px; }
    .nav-title {
        font-family:var(--font-accent); font-size:0.7rem; font-weight:600; color:var(--wisteria);
        letter-spacing:0.2em; text-transform:uppercase;
        margin-bottom:1.2rem; padding-bottom:0.8rem;
        border-bottom:1px solid rgba(139,92,246,0.18);
        /* Let it wrap at very large font sizes instead of overflowing */
        white-space: normal; word-break: break-word;
    }
    .nav-list { list-style:none; display:flex; flex-direction:column; gap:0.4rem; }
    .nav-item {
        padding:0.75rem 1rem; border-radius:12px; cursor:pointer; transition:all 0.25s;
        display:flex; align-items:center; gap:0.65rem;
        font-weight:500; color:var(--lavender); border:1px solid transparent;
        font-size:0.88rem;
        /* Wrap label text instead of clipping; keep icon + count on same row */
        flex-wrap: wrap;
    }
    .nav-item:hover { background:rgba(139,92,246,0.18); border-color:rgba(139,92,246,0.28); color:var(--petal-white); }
    .nav-item.active { background:linear-gradient(135deg,rgba(109,40,217,0.4),rgba(139,92,246,0.25)); border-color:var(--amethyst); color:var(--petal-white); box-shadow:0 0 15px var(--glow-soft); }
    .nav-icon { font-size:1.05rem; width:1.4em; text-align:center; flex-shrink:0; }
    .nav-item > span:not(.nav-icon):not(.nav-count) { flex:1; min-width:0; word-break:break-word; }
    .nav-count {
        margin-left:auto; flex-shrink:0;
        background:rgba(109,40,217,0.4); padding:0.15rem 0.5rem;
        border-radius:20px; font-size:0.7rem; font-weight:600; color:var(--lavender);
        /* Scale with em so it doesn't shrink relative to label at large sizes */
        min-width: 1.8em; text-align: center;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       AUDIOS SECTION
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .audios-section { flex:1; min-width:0; }
    .section-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:1.5rem; flex-wrap:wrap; gap:1rem; }
    .section-title { font-family:var(--font-display); font-size:1.8rem; font-weight:700; color:var(--petal-white); display:flex; align-items:center; gap:0.75rem; }
    .section-title::before { content:''; width:4px; height:1.8rem; background:linear-gradient(180deg,var(--amethyst),var(--royal-purple)); border-radius:2px; }
    .section-controls { display:flex; align-items:center; gap:0.7rem; flex-wrap:wrap; }

    .sort-control { display:inline-flex; align-items:center; gap:0.45rem; }
    .sort-control label { color:var(--wisteria); font-size:0.8rem; font-weight:500; white-space:nowrap; }
    .sort-select {
        background:rgba(45,27,82,0.6); border:1px solid rgba(139,92,246,0.38);
        border-radius:25px; padding:0.52rem 1rem; color:var(--pale-lilac);
        font-family:var(--font-body); font-size:0.8rem; cursor:pointer; transition:all 0.3s; outline:none;
    }
    .sort-select:hover,.sort-select:focus { border-color:var(--amethyst); box-shadow:0 0 12px var(--glow-soft); }
    .sort-select option { background:var(--void); color:var(--pale-lilac); }

    .favorites-toggle {
        display:inline-flex; align-items:center; gap:0.4rem;
        padding:0.52rem 1rem; background:rgba(45,27,82,0.5); border:1px solid rgba(139,92,246,0.38);
        border-radius:25px; color:var(--lavender); font-family:var(--font-body); font-size:0.8rem; font-weight:500;
        cursor:pointer; transition:all 0.3s; white-space:nowrap;
    }
    .favorites-toggle svg { width:15px; height:15px; flex-shrink:0; }
    .favorites-toggle:hover { background:rgba(139,92,246,0.25); border-color:var(--amethyst); }
    .favorites-toggle.active { background:linear-gradient(135deg,rgba(139,92,246,0.4),rgba(109,40,217,0.32)); border-color:var(--amethyst); color:var(--petal-white); box-shadow:0 0 12px var(--glow-soft); }
    .favorites-toggle.active svg { fill:var(--wisteria); }

    .random-btn {
        display:inline-flex; align-items:center; gap:0.4rem;
        padding:0.52rem 1rem; background:rgba(45,27,82,0.5); border:1px solid rgba(139,92,246,0.38);
        border-radius:25px; color:var(--lavender); font-family:var(--font-body); font-size:0.8rem; font-weight:500;
        cursor:pointer; transition:all 0.3s; white-space:nowrap;
    }
    .random-btn svg { width:15px; height:15px; flex-shrink:0; }
    .random-btn:hover { background:rgba(139,92,246,0.25); border-color:var(--amethyst); color:var(--petal-white); }

    .view-controls { display:flex; align-items:center; gap:0.75rem; margin-bottom:1.4rem; justify-content:flex-end; }
    .view-toggle { display:flex; gap:0.3rem; background:rgba(28,16,48,0.75); border-radius:10px; padding:0.28rem; }
    .view-btn { width:33px; height:33px; border-radius:7px; background:transparent; border:none; cursor:pointer; color:rgba(196,181,253,0.45); transition:all 0.25s; display:flex; align-items:center; justify-content:center; }
    .view-btn svg { width:17px; height:17px; }
    .view-btn:hover { color:var(--lavender); background:rgba(139,92,246,0.2); }
    .view-btn.active { background:linear-gradient(135deg,var(--royal-purple),var(--amethyst)); color:var(--snow); }
    .results-count { font-size:0.78rem; color:var(--wisteria); font-family:var(--font-accent); letter-spacing:0.08em; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       GRID
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .audios-grid { display:grid; grid-template-columns:1fr; gap:1.4rem; }
    .audios-grid.view-2 { grid-template-columns:repeat(2,1fr); }
    .audios-grid.view-3 { grid-template-columns:repeat(3,1fr); }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       AUDIO CARD
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .audio-card {
        background:linear-gradient(145deg,rgba(29,16,51,0.88),rgba(18,13,31,0.94));
        border:1px solid rgba(139,92,246,0.18); border-radius:18px; overflow:hidden;
        transition:all 0.32s ease; position:relative; box-shadow:0 6px 25px rgba(0,0,0,0.35);
        animation:cardIn 0.4s ease both;
        display:flex; flex-direction:column;
    }
    @keyframes cardIn { from{opacity:0;transform:translateY(16px)} to{opacity:1;transform:translateY(0)} }
    .audio-card:hover { transform:translateY(-5px); border-color:rgba(167,139,250,0.4); box-shadow:0 18px 55px rgba(74,31,168,0.3),0 0 0 1px rgba(196,181,253,0.07); }
    .audio-card::before { content:''; position:absolute; top:0;left:0;right:0; height:3px; background:linear-gradient(90deg,var(--deep-violet),var(--amethyst),var(--lavender)); opacity:0; transition:opacity 0.32s; }
    .audio-card:hover::before { opacity:1; }

    .card-header { display:flex; align-items:center; justify-content:space-between; padding:1.2rem 1.4rem 0; }

    /* Type badges */
    .type-badge { display:inline-flex; align-items:center; gap:0.35rem; padding:0.26rem 0.82rem; border-radius:20px; font-size:0.66rem; font-weight:700; letter-spacing:0.1em; text-transform:uppercase; font-family:var(--font-accent); }
    .type-fsub      { background:rgba(139,92,246,0.2);   border:1px solid rgba(139,92,246,0.4);   color:#c4b5fd; }
    .type-fdom      { background:rgba(109,40,217,0.25);  border:1px solid rgba(109,40,217,0.5);   color:#a78bfa; }
    .type-fswitch   { background:rgba(74,31,168,0.25);   border:1px solid rgba(167,139,250,0.4);  color:#ddd6fe; }
    .type-yandere   { background:rgba(56,16,90,0.35);    border:1px solid rgba(192,90,246,0.45);  color:#e9d5ff; }
    .type-sfw       { background:rgba(20,60,30,0.35);    border:1px solid rgba(74,222,128,0.35);  color:#86efac; }
    .type-ramblefap { background:rgba(90,28,80,0.3);     border:1px solid rgba(236,72,153,0.35);  color:#f9a8d4; }
    .type-karaoke   { background:rgba(28,38,90,0.3);     border:1px solid rgba(96,165,250,0.35);  color:#93c5fd; }
    .type-romantic  { background:rgba(120,20,60,0.3);    border:1px solid rgba(251,113,133,0.45); color:#fda4af; }
    .type-collab    { background:rgba(15,55,75,0.35);    border:1px solid rgba(34,211,238,0.38);  color:#67e8f9; }

    /* Favourite button */
    .card-favorite-btn { width:32px; height:32px; border-radius:50%; background:rgba(45,27,82,0.6); border:1px solid rgba(139,92,246,0.3); cursor:pointer; display:flex; align-items:center; justify-content:center; transition:all 0.25s; color:var(--lavender); flex-shrink:0; }
    .card-favorite-btn svg { width:16px; height:16px; }
    .card-favorite-btn:hover { background:rgba(139,92,246,0.3); border-color:var(--amethyst); }
    .card-favorite-btn.favorited { color:var(--wisteria); background:rgba(139,92,246,0.25); border-color:var(--wisteria); }
    .card-favorite-btn.favorited svg { fill:var(--wisteria); }

    /* Card body */
    .card-content { padding:1rem 1.4rem 1.4rem; display:flex; flex-direction:column; flex:1; }
    .card-title { font-family:var(--font-display); font-size:0.98rem; font-weight:700; color:var(--petal-white); margin-bottom:0.8rem; line-height:1.45; }

    /* Tags */
    .card-tags { display:flex; flex-wrap:wrap; gap:0.3rem; margin-bottom:0.85rem; }
    .tag { padding:0.18rem 0.6rem; border-radius:12px; font-size:0.67rem; letter-spacing:0.04em; color:var(--wisteria); background:rgba(74,31,168,0.2); border:1px solid rgba(139,92,246,0.2); cursor:pointer; transition:all 0.2s; }
    .tag:hover { background:rgba(139,92,246,0.35); color:var(--petal-white); border-color:var(--amethyst); }
    .tag.hidden { display:none; }
    .tag-expand-btn { padding:0.18rem 0.6rem; border-radius:12px; font-size:0.67rem; letter-spacing:0.04em; color:var(--amethyst); background:transparent; border:1px solid rgba(139,92,246,0.28); cursor:pointer; transition:all 0.2s; font-family:var(--font-body); }
    .tag-expand-btn:hover { background:rgba(139,92,246,0.2); color:var(--petal-white); }

    /* Synopsis */
    .card-synopsis { font-size:0.84rem; line-height:1.75; color:var(--lavender); margin-bottom:0; }
    .card-synopsis.clamped {
        display:-webkit-box; -webkit-box-orient:vertical; -webkit-line-clamp:4;
        overflow:hidden;
    }
    .synopsis-toggle {
        background:none; border:none; cursor:pointer; padding:0.22rem 0;
        font-size:0.75rem; color:var(--amethyst); font-family:var(--font-body);
        letter-spacing:0.04em; transition:color 0.18s; display:block; margin-top:0.35rem;
        margin-bottom:0.9rem;
    }
    .synopsis-toggle:hover { color:var(--wisteria); }

    /* Meta */
    .card-meta { display:flex; align-items:center; gap:1rem; margin-bottom:0.8rem; flex-wrap:wrap; }
    .meta-item { display:flex; align-items:center; gap:0.3rem; font-size:0.73rem; color:var(--amethyst); font-family:var(--font-accent); letter-spacing:0.05em; }
    .meta-item svg { width:12px; height:12px; flex-shrink:0; }

    /* Credits */
    .card-credits { display:flex; flex-wrap:wrap; gap:0.5rem; margin-bottom:0.9rem; }
    .credit-item { font-size:0.72rem; color:rgba(196,181,253,0.6); font-family:var(--font-accent); }
    .credit-item a { color:var(--wisteria); text-decoration:none; border-bottom:1px solid rgba(167,139,250,0.3); transition:all 0.2s; }
    .credit-item a:hover { color:var(--petal-white); border-color:var(--lavender); }
    .large-collab-notice {
        display:flex; align-items:center; gap:0.55rem;
        padding:0.55rem 0.9rem; border-radius:12px; margin-bottom:0.9rem;
        background:linear-gradient(135deg,rgba(15,55,75,0.45),rgba(6,30,50,0.55));
        border:1px solid rgba(34,211,238,0.28);
        font-size:0.74rem; color:#a5f3fc; font-family:var(--font-accent); line-height:1.5;
    }
    .large-collab-notice a {
        color:#67e8f9; font-weight:700; text-decoration:none;
        border-bottom:1px solid rgba(103,232,249,0.4); transition:all 0.18s;
        white-space:nowrap;
    }
    .large-collab-notice a:hover { color:#e0f9ff; border-color:#a5f3fc; }

    /* Divider */
    .card-divider { border:none; border-top:1px solid rgba(139,92,246,0.1); margin:0.85rem 0; margin-top:auto; }

    /* Buttons */
    .card-buttons { display:flex; gap:0.55rem; flex-wrap:wrap; }
    .card-link { display:inline-flex; align-items:center; gap:0.38rem; padding:0.52rem 1rem; border-radius:25px; font-size:0.76rem; font-weight:600; letter-spacing:0.05em; cursor:pointer; transition:all 0.25s; text-decoration:none; font-family:var(--font-body); border:none; }
    .card-link svg { width:14px; height:14px; flex-shrink:0; }
    .card-link-primary { background:linear-gradient(135deg,var(--royal-purple),var(--amethyst)); color:var(--snow); box-shadow:0 3px 14px rgba(109,40,217,0.35); }
    .card-link-primary:hover { transform:translateY(-2px); box-shadow:0 6px 24px rgba(109,40,217,0.55); }
    .card-link-secondary { background:rgba(74,31,168,0.2); color:var(--lavender); border:1px solid rgba(139,92,246,0.32); }
    .card-link-secondary:hover { background:rgba(139,92,246,0.3); color:var(--petal-white); border-color:var(--amethyst); }
    .card-link-disabled { background:rgba(28,16,48,0.5); color:rgba(196,181,253,0.32); border:1px solid rgba(139,92,246,0.13); cursor:not-allowed; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       STATES
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .loading-state,.error-state,.empty-state { grid-column:1/-1; text-align:center; padding:5rem 2rem; display:flex; flex-direction:column; align-items:center; gap:1.2rem; }

    /* â”€â”€â”€ Smart search divider â”€â”€â”€ */
    .related-divider {
        grid-column: 1/-1;
        display: flex; align-items: center; gap: 1rem;
        padding: 0.6rem 0 0.2rem;
    }
    .related-divider::before, .related-divider::after {
        content: ''; flex: 1; height: 1px;
        background: linear-gradient(90deg, transparent, rgba(139,92,246,0.3), transparent);
    }
    .related-divider-label {
        font-family: var(--font-accent); font-size: 0.65rem; letter-spacing: 0.25em;
        text-transform: uppercase; color: rgba(167,139,250,0.5); white-space: nowrap;
        padding: 0.28rem 0.9rem; border-radius: 20px;
        border: 1px solid rgba(139,92,246,0.2); background: rgba(45,27,82,0.3);
    }
    .card-related { opacity: 0.72; }
    .card-related:hover { opacity: 1; }
    .loading-spinner { width:46px; height:46px; border-radius:50%; border:3px solid rgba(139,92,246,0.2); border-top-color:var(--amethyst); animation:spin 0.9s linear infinite; }
    @keyframes spin { to{transform:rotate(360deg)} }
    .loading-state p,.empty-state p { color:var(--wisteria); font-size:0.93rem; }
    .error-icon,.empty-icon { font-size:2.5rem; }
    .error-title,.empty-title { font-family:var(--font-display); color:var(--petal-white); font-size:1.25rem; }
    .error-state p { color:var(--lavender); font-size:0.88rem; }
    .retry-btn { padding:0.68rem 2rem; border-radius:30px; background:linear-gradient(135deg,var(--royal-purple),var(--amethyst)); color:var(--snow); border:none; cursor:pointer; font-family:var(--font-body); font-size:0.86rem; font-weight:600; transition:all 0.3s; box-shadow:0 4px 18px var(--glow-deep); }
    .retry-btn:hover { transform:translateY(-2px); box-shadow:0 8px 28px var(--glow-deep); }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ACCESSIBILITY PANEL
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .a11y-overlay { position:fixed; inset:0; background:rgba(10,7,18,0.6); z-index:4000; opacity:0; visibility:hidden; transition:all 0.3s; }
    .a11y-overlay.open { opacity:1; visibility:visible; }
    .a11y-panel { position:fixed; top:0; right:0; width:300px; height:100%; background:linear-gradient(180deg,rgba(45,27,82,0.98),rgba(18,13,31,0.99)); border-left:1px solid rgba(139,92,246,0.3); z-index:4001; padding:2rem 1.5rem; transform:translateX(100%); transition:transform 0.35s cubic-bezier(0.4,0,0.2,1); overflow-y:auto; }
    .a11y-panel.open { transform:translateX(0); }
    .a11y-header { display:flex; align-items:center; justify-content:space-between; margin-bottom:2rem; }
    .a11y-title { font-family:var(--font-display); font-size:1.1rem; color:var(--petal-white); }
    .a11y-close { width:32px; height:32px; border-radius:50%; background:rgba(139,92,246,0.15); border:1px solid rgba(139,92,246,0.3); color:var(--lavender); cursor:pointer; font-size:1rem; display:flex; align-items:center; justify-content:center; transition:all 0.2s; }
    .a11y-close:hover { background:rgba(139,92,246,0.3); color:var(--snow); }
    .a11y-section { margin-bottom:2rem; }
    .a11y-section-title { font-family:var(--font-accent); font-size:0.67rem; letter-spacing:0.25em; text-transform:uppercase; color:var(--amethyst); margin-bottom:1rem; }
    .font-size-control { display:flex; align-items:center; gap:0.75rem; }
    .font-size-btn { width:36px; height:36px; border-radius:8px; background:rgba(74,31,168,0.3); border:1px solid rgba(139,92,246,0.35); color:var(--lavender); cursor:pointer; font-size:1.1rem; display:flex; align-items:center; justify-content:center; transition:all 0.2s; }
    .font-size-btn:hover { background:rgba(139,92,246,0.4); color:var(--snow); }
    .font-size-display { flex:1; text-align:center; font-size:0.9rem; color:var(--petal-white); background:rgba(28,16,48,0.6); border-radius:8px; padding:0.42rem; border:1px solid rgba(139,92,246,0.2); }
    .font-type-grid { display:grid; grid-template-columns:1fr 1fr; gap:0.5rem; }
    .font-type-btn { padding:0.55rem; border-radius:10px; background:rgba(45,27,82,0.5); border:1px solid rgba(139,92,246,0.22); color:var(--lavender); cursor:pointer; font-size:0.78rem; transition:all 0.2s; font-family:inherit; text-align:center; }
    .font-type-btn:hover { background:rgba(139,92,246,0.25); color:var(--petal-white); }
    .font-type-btn.active { background:linear-gradient(135deg,rgba(109,40,217,0.5),rgba(139,92,246,0.35)); border-color:var(--amethyst); color:var(--petal-white); }
    .a11y-reset { width:100%; padding:0.65rem; background:rgba(74,31,168,0.22); border:1px solid rgba(139,92,246,0.28); border-radius:12px; color:var(--lavender); cursor:pointer; font-family:var(--font-body); font-size:0.83rem; transition:all 0.2s; }
    .a11y-reset:hover { background:rgba(139,92,246,0.3); color:var(--petal-white); }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       FOOTER
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    footer { border-top:1px solid rgba(139,92,246,0.1); padding:2rem; text-align:center; margin-top:3rem; }
    .footer-kana { font-family:var(--font-display); font-size:1.3rem; color:rgba(167,139,250,0.27); letter-spacing:0.3em; margin-bottom:0.6rem; }
    .footer-text { font-size:0.74rem; color:rgba(167,139,250,0.33); letter-spacing:0.1em; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       RESPONSIVE
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    @media (max-width:900px) {
        .main-container { flex-direction:column; padding:1.2rem; }
        .sidebar { width:100%; max-width:100%; position:static; max-height:none; }
        .nav-panel { overflow-y:visible; }
        .nav-list {
            flex-direction:row; flex-wrap:wrap;
            justify-content:center; gap:0.5rem;
        }
        .nav-item { flex-basis:auto; justify-content:center; flex-wrap:nowrap; }
        .nav-item .nav-count { display:none; }
    }
    @media (max-width:600px) {
        header { padding:1rem 1.2rem; }
        .header-content { justify-content:center; text-align:center; flex-direction:column; align-items:center; }
        .logo { justify-content:center; }
        .search-container { max-width:100%; }
        .header-right { width:100%; justify-content:center; }
        .header-socials { justify-content:center; width:100%; }
        .logo-title { font-size:1.1rem; }
        .audios-grid.view-2,.audios-grid.view-3 { grid-template-columns:1fr; }
        .a11y-panel { width:100%; }
        .section-header { flex-direction:column; align-items:flex-start; }
        .section-controls { flex-wrap:wrap; }
        .view-controls { display:none; }
    }
    </style>
</head>
<body>

<!-- â”€â”€ BACKGROUND â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="geo-bg"></div>
<canvas class="geo-canvas" id="geoCanvas"></canvas>
<div class="sakura-container" id="sakuraContainer"></div>

<!-- â”€â”€ AGE GATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="age-overlay" id="ageOverlay">
    <div class="age-modal">
        <div class="age-kamon">ğŸŒ¸</div>
        <div class="age-subtitle">â€” Adults Only â€”</div>
        <h2>Purple-Juice-4073</h2>
        <div class="age-divider"></div>
        <p>This site contains <strong>explicit adult audio content</strong>.<br>
        You must be <strong>18 years or older</strong> to enter.<br>
        By proceeding you confirm you meet this requirement.</p>
        <div class="age-buttons">
            <button class="btn-proceed" onclick="verifyAge()">âœ¦ Enter âœ¦</button>
            <button class="btn-leave" onclick="window.location.href='https://www.google.com'">Leave</button>
        </div>
    </div>
</div>

<!-- â”€â”€ ACCESSIBILITY PANEL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="a11y-overlay" id="a11yOverlay"></div>
<aside class="a11y-panel" id="a11yPanel">
    <div class="a11y-header">
        <span class="a11y-title">Accessibility</span>
        <button class="a11y-close" id="a11yClose">âœ•</button>
    </div>
    <div class="a11y-section">
        <div class="a11y-section-title">Font Size</div>
        <div class="font-size-control">
            <button class="font-size-btn" id="fontDecrease">âˆ’</button>
            <div class="font-size-display"><span id="fontSizeDisplay">16</span>px</div>
            <button class="font-size-btn" id="fontIncrease">+</button>
        </div>
    </div>
    <div class="a11y-section">
        <div class="a11y-section-title">Font Style</div>
        <div class="font-type-grid">
            <button class="font-type-btn active" data-font="default">Default</button>
            <button class="font-type-btn" data-font="arial">Arial</button>
            <button class="font-type-btn" data-font="times">Times</button>
            <button class="font-type-btn" data-font="atkinson">Atkinson</button>
            <button class="font-type-btn" data-font="dyslexic" style="grid-column:span 2">OpenDyslexic</button>
        </div>
    </div>
    <button class="a11y-reset" id="a11yReset">â†º Reset to Defaults</button>
</aside>

<!-- â”€â”€ HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<header>
    <div class="header-content">
        <a class="logo" href="#">
            <div class="logo-icon">ğŸŒ¸</div>
            <div class="logo-text">
                <span class="logo-title">Purple-Juice-4073</span>
                <span class="logo-sub">NSFW Voice Artist Â· Audio Masterlist</span>
            </div>
        </a>

        <div class="search-container">
            <span class="search-icon">ğŸ”</span>
            <input type="text" class="search-input" id="searchInput"
                   placeholder="Search titles, tags, synopsesâ€¦" autocomplete="off">
            <ul class="search-suggestions" id="searchSuggestions" role="listbox"></ul>
        </div>

        <div class="header-right">
            <div class="header-socials">
                <!-- Reddit -->
                <a class="social-icon social-reddit" href="https://www.reddit.com/user/Purple-Juice-4073/" target="_blank" rel="noopener noreferrer" title="Reddit">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                        <circle class="reddit-bg" cx="10" cy="10" r="10"/>
                        <path class="reddit-fg" d="M16.67 10a1.46 1.46 0 00-2.47-1 7.12 7.12 0 00-3.85-1.23l.65-3.08 2.13.45a1 1 0 101.07-1 1 1 0 00-.96.68l-2.38-.5a.16.16 0 00-.19.12l-.73 3.44a7.14 7.14 0 00-3.89 1.23 1.46 1.46 0 10-1.61 2.39 2.87 2.87 0 000 .44c0 2.24 2.61 4.06 5.83 4.06s5.83-1.82 5.83-4.06a2.87 2.87 0 000-.44 1.46 1.46 0 00.47-1.5zM7.27 11a1 1 0 111 1 1 1 0 01-1-1zm5.58 2.71a3.58 3.58 0 01-2.85.57 3.58 3.58 0 01-2.85-.57.19.19 0 01.27-.27 3.2 3.2 0 002.58.44 3.2 3.2 0 002.58-.44.19.19 0 01.27.27zm-.14-1.71a1 1 0 111-1 1 1 0 01-1 1z"/>
                    </svg>
                </a>
                <!-- Bluesky -->
                <a class="social-icon social-bluesky" href="https://bsky.app/profile/purple-juice-4073.bsky.social" target="_blank" rel="noopener noreferrer" title="Bluesky">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 530" fill="currentColor">
                        <path d="M300 241.5C263.6 165.3 176.4 51.4 99.1 15.8 66.5.2 24.4-7.8 9.6 24.5c-9.3 20.5-7 61.7 2.9 86.3 23.1 59.6 85.1 74.5 145.1 66.9-106.4 18.1-133.9 80.2-75.3 142.2 55.4 58.6 119.8 29.5 148.5-14.5 11.3-17.3 18.7-35.5 23-52.3 4.3 16.8 11.7 35 23 52.3 28.7 44 93.1 73.1 148.5 14.5 58.6-62 31.1-124.1-75.3-142.2 60 7.6 122 -7.3 145.1-66.9 9.9-24.6 12.2-65.8 2.9-86.3C482.6-7.8 440.5.2 407.9 15.8c-77.3 35.6-164.5 149.5-200.9 225.7 0 0-3.7 0-7 0z"/>
                    </svg>
                </a>
                <!-- Twitter / X -->
                <a class="social-icon social-twitter" href="https://x.com/purplejuice4073?s=21" target="_blank" rel="noopener noreferrer" title="Twitter / X">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                    </svg>
                </a>
                <!-- Discord -->
                <a class="social-icon social-discord" href="https://discord.com/invite/Q85FgE8b66" target="_blank" rel="noopener noreferrer" title="Discord">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20.317 4.37a19.791 19.791 0 00-4.885-1.515.074.074 0 00-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 00-5.487 0 12.64 12.64 0 00-.617-1.25.077.077 0 00-.079-.037A19.736 19.736 0 003.677 4.37a.07.07 0 00-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 00.031.057 19.9 19.9 0 005.993 3.03.078.078 0 00.084-.028 14.09 14.09 0 001.226-1.994.076.076 0 00-.041-.106 13.107 13.107 0 01-1.872-.892.077.077 0 01-.008-.128 10.2 10.2 0 00.372-.292.074.074 0 01.077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 01.078.01c.12.098.246.198.373.292a.077.077 0 01-.006.127 12.299 12.299 0 01-1.873.892.077.077 0 00-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 00.084.028 19.839 19.839 0 006.002-3.03.077.077 0 00.032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 00-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/>
                    </svg>
                </a>
                <!-- Throne -->
                <a class="social-icon social-throne" href="https://throne.com/purple-juice-4073" target="_blank" rel="noopener noreferrer" title="Throne Wishlist">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2L2 7l2 13h16L22 7zm0 3.5l6 3-1.5 9.5H7.5L6 13.5zM9 11v4h2v-3h2v3h2v-4H9z"/>
                    </svg>
                </a>
                <!-- Ko-fi -->
                <a class="social-icon social-kofi" href="https://ko-fi.com/purplejuice4073" target="_blank" rel="noopener noreferrer" title="Ko-fi">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M23.881 8.948c-.773-4.085-4.859-4.593-4.859-4.593H.723c-.604 0-.679.798-.679.798s-.082 7.324-.022 11.822c.164 2.424 2.586 2.672 2.586 2.672s8.267-.023 11.966-.049c2.438-.426 2.683-2.566 2.658-3.734 4.352.24 7.422-2.831 6.649-6.916zm-11.062 3.511c-1.246 1.453-4.011 3.976-4.011 3.976s-.121.119-.31.023c-.076-.057-.108-.09-.108-.09-.443-.441-3.368-3.049-4.034-3.954-.709-.965-1.041-2.7-.091-3.71.951-1.01 3.005-1.086 4.363.407 0 0 1.565-1.782 3.468-.963 1.904.82 1.832 3.011.723 4.311zm6.173.478c-.928.116-1.682.028-1.682.028V7.284h1.77s1.971.551 1.971 2.638c0 1.913-.985 2.667-2.059 3.015z"/>
                    </svg>
                </a>
            </div>
            <button class="accessibility-btn" id="a11yBtn" title="Accessibility settings">Aa</button>
        </div>
    </div>
    <div class="active-tag-bar" id="activeTagBar"></div>
</header>

<!-- â”€â”€ MAIN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="main-container">

    <!-- Sidebar nav -->
    <aside class="sidebar">
        <nav class="nav-panel">
            <div class="nav-title">å£°ã®ã‚¸ãƒ£ãƒ³ãƒ« Â· Filter by Type</div>
            <ul class="nav-list" id="navList">
                <li class="nav-item active" data-type="all">
                    <span class="nav-icon">âœ¨</span><span>All Audios</span>
                    <span class="nav-count" id="count-all">0</span>
                </li>
                <li class="nav-item" data-type="fsub">
                    <span class="nav-icon">ğŸ’œ</span><span>FSub</span>
                    <span class="nav-count" id="count-fsub">0</span>
                </li>
                <li class="nav-item" data-type="fdom">
                    <span class="nav-icon">ğŸ‘‘</span><span>FDom</span>
                    <span class="nav-count" id="count-fdom">0</span>
                </li>
                <li class="nav-item" data-type="fswitch">
                    <span class="nav-icon">ğŸ”€</span><span>FSwitch</span>
                    <span class="nav-count" id="count-fswitch">0</span>
                </li>
                <li class="nav-item" data-type="yandere">
                    <span class="nav-icon">ğŸŒ™</span><span>Yandere</span>
                    <span class="nav-count" id="count-yandere">0</span>
                </li>
                <li class="nav-item" data-type="sfw">
                    <span class="nav-icon">ğŸŒ¸</span><span>SFW</span>
                    <span class="nav-count" id="count-sfw">0</span>
                </li>
                <li class="nav-item" data-type="karaoke">
                    <span class="nav-icon">ğŸ¤</span><span>Karaoke</span>
                    <span class="nav-count" id="count-karaoke">0</span>
                </li>
                <li class="nav-item" data-type="ramblefap">
                    <span class="nav-icon">ğŸ§</span><span>Ramblefap</span>
                    <span class="nav-count" id="count-ramblefap">0</span>
                </li>
                <li class="nav-item" data-type="romantic">
                    <span class="nav-icon">ğŸŒ¹</span><span>Romantic</span>
                    <span class="nav-count" id="count-romantic">0</span>
                </li>
                <li class="nav-item" data-type="collab">
                    <span class="nav-icon">ğŸ™ï¸</span><span>Collab</span>
                    <span class="nav-count" id="count-collab">0</span>
                </li>
            </ul>
        </nav>
    </aside>

    <!-- Audios section -->
    <section class="audios-section">
        <div class="section-header">
            <h2 class="section-title" id="sectionTitle">All Audios</h2>
            <div class="section-controls">
                <div class="sort-control">
                    <label for="sortSelect">Sort:</label>
                    <select id="sortSelect" class="sort-select">
                        <option value="newest">Newest</option>
                        <option value="oldest">Oldest</option>
                        <option value="alphabetical">Aâ€“Z</option>
                    </select>
                </div>
                <button class="favorites-toggle" id="favoritesToggle" title="Show favourites only">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                    </svg>
                    Favourites
                </button>
                <button class="random-btn" id="randomBtn" title="Open a random audio">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4h5l2 4-3.5 2 2 3.5H14m2-9.5l4 4-4 4m0-8v8"/>
                    </svg>
                    Surprise Me!
                </button>
            </div>
        </div>

        <div class="view-controls">
            <div class="view-toggle" id="viewToggle">
                <button class="view-btn active" data-view="1" title="Single column">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><rect x="3" y="4" width="18" height="16" rx="2"/></svg>
                </button>
                <button class="view-btn" data-view="2" title="Two columns">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><rect x="3" y="4" width="8" height="16" rx="1"/><rect x="13" y="4" width="8" height="16" rx="1"/></svg>
                </button>
                <button class="view-btn" data-view="3" title="Three columns">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><rect x="2" y="4" width="5.5" height="16" rx="1"/><rect x="9.25" y="4" width="5.5" height="16" rx="1"/><rect x="16.5" y="4" width="5.5" height="16" rx="1"/></svg>
                </button>
            </div>
            <span class="results-count" id="resultsCount">Loadingâ€¦</span>
        </div>

        <div class="audios-grid view-1" id="audiosGrid">
            <!-- injected by JS -->
        </div>
    </section>
</div>

<!-- â”€â”€ FOOTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<footer>
    <div class="footer-kana">ç´« Â· å£° Â· æ„› Â· å¤¢ Â· æ˜Ÿ Â· èŠ±</div>
    <p class="footer-text">Â© 2026 Purple-Juice-4073 Â· All Rights Reserved Â· 18+ Only Â· MDNI</p>
</footer>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     JAVASCRIPT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script>
'use strict';

/* â”€â”€ CONFIG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const CONFIG = {
    dataPath: './audios.json',
    typeLabels: {
        all:        'All Audios',
        fsub:       'FSub',
        fdom:       'FDom',
        fswitch:    'FSwitch',
        yandere:    'Yandere',
        sfw:        'SFW',
        karaoke:    'Karaoke',
        ramblefap:  'Ramblefap',
        romantic:   'Romantic',
        collab:     'Collab',
    },
    typeEmoji: {
        fsub:'ğŸ’œ', fdom:'ğŸ‘‘', fswitch:'ğŸ”€', yandere:'ğŸŒ™',
        sfw:'ğŸŒ¸', ramblefap:'ğŸ§', karaoke:'ğŸ¤', romantic:'ğŸŒ¹', collab:'ğŸ™ï¸',
    }
};

/* â”€â”€ STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const state = {
    audios:      [],
    currentType: 'all',
    searchQuery: '',
    currentView: localStorage.getItem('pj_view') || '1',
    sortOrder:   localStorage.getItem('pj_sort') || 'newest',
    showFavOnly: false,
    favorites:   JSON.parse(localStorage.getItem('pj_favs') || '[]'),
};

/* â”€â”€ DOM REFS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const $ = id => document.getElementById(id);
const dom = {
    grid:      $('audiosGrid'),
    search:    $('searchInput'),
    navItems:  document.querySelectorAll('.nav-item'),
    secTitle:  $('sectionTitle'),
    resCnt:    $('resultsCount'),
    viewTgl:   $('viewToggle'),
    viewBtns:  document.querySelectorAll('.view-btn'),
    sortSel:   $('sortSelect'),
    favBtn:    $('favoritesToggle'),
    randBtn:   $('randomBtn'),
};

/* â”€â”€ HELPERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function esc(s) {
    const d = document.createElement('div');
    d.textContent = String(s);
    return d.innerHTML;
}
function debounce(fn, ms) {
    let t; return (...a) => { clearTimeout(t); t = setTimeout(() => fn(...a), ms); };
}
function resolveType(audio) { return audio.type || 'romantic'; }

/* â”€â”€ FAVOURITES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function isFav(id)   { return state.favorites.includes(id); }
function saveFavs()  { localStorage.setItem('pj_favs', JSON.stringify(state.favorites)); }
function toggleFav(id) {
    const i = state.favorites.indexOf(id);
    if (i > -1) state.favorites.splice(i, 1); else state.favorites.push(id);
    saveFavs(); renderAudios();
}

/* â”€â”€ SORT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function doSort(list) {
    const a = [...list];
    if (state.sortOrder === 'newest')      return a.sort((a,b) => new Date(b.date||0) - new Date(a.date||0));
    if (state.sortOrder === 'oldest')      return a.sort((a,b) => new Date(a.date||0) - new Date(b.date||0));
    if (state.sortOrder === 'alphabetical') return a.sort((a,b) => (a.title||'').localeCompare(b.title||''));
    return a;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SMART SEARCH ENGINE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/**
 * Normalize a tag to a canonical key for comparison.
 * Strips case, spaces, hyphens, punctuation, trailing 's' for plurals.
 */
function normKey(str) {
    return str.toLowerCase()
        .replace(/[''""]/g, '')         // smart quotes
        .replace(/[^a-z0-9]/g, '')      // all non-alphanumeric
        .replace(/s$/, '');             // naive depluralize
}

/**
 * SYNONYM MAP: maps variant keys â†’ canonical key.
 * Built from the actual tag vocabulary in this dataset.
 */
const SYNONYMS = (() => {
    const m = {};
    const pairs = [
        // â”€ Blowjob / oral (giving) â”€
        ['blowjob','blowjob'],['blowjobs','blowjob'],['blowjob','blowjob'],
        ['blowjob','blowjob'],['blowjob','blowjob'],['blojob','blowjob'],
        ['bj','blowjob'],['bjob','blowjob'],['blow job','blowjob'],
        ['sloppyblowjob','blowjob'],['sloppybj','blowjob'],
        // â”€ Deepthroat â”€
        ['deepthroat','deepthroat'],['deepthroating','deepthroat'],
        ['deep throat','deepthroat'],['deep throating','deepthroat'],
        ['deepthroated','deepthroat'],['deepthoat','deepthroat'],
        ['deepthroat','deepthroat'],['gooey throat cock worship','deepthroat'],
        // â”€ Facefuck â”€
        ['facefuck','facefuck'],['facefucking','facefuck'],
        ['face fucking','facefuck'],['face fuck','facefuck'],
        ['face fucked','facefuck'],['shoving your anger down her throat','facefuck'],
        // â”€ Throatpie â”€
        ['throatpie','throatpie'],['throat pie','throatpie'],
        ['clean up blowjob','throatpie'],
        // â”€ Handjob â”€
        ['handjob','handjob'],['hand job','handjob'],['handJob','handjob'],
        ['hands job','handjob'],['milking handjob','handjob'],
        ['nursing handjob','handjob'],['nursing hand job','handjob'],
        ['sloppy handjob','handjob'],
        // â”€ Cunnilingus / pussy eating â”€
        ['cunnilingus','cunnilingus'],['cunnlingus','cunnilingus'],
        ['pussy eating','cunnilingus'],['eating her out','cunnilingus'],
        ['eating pussy','cunnilingus'],['face riding','cunnilingus'],
        ['grinding my pussy on your face','cunnilingus'],
        // â”€ Creampie â”€
        ['creampie','creampie'],['cream pie','creampie'],
        ['creampie 1x','creampie'],['creampie x1','creampie'],
        ['ballsdeep creampie','creampie'],['risky creampie','creampie'],
        ['forced creampie','creampie'],['multiple creampies','creampie'],
        ['cum inside','creampie'],['cum in me','creampie'],
        ['fill me up','creampie'],['cumming inside','creampie'],
        // â”€ Breeding / impreg â”€
        ['breeding','breeding'],['breed me','breeding'],
        ['impregnation','breeding'],['impreg','breeding'],
        ['impreg risk','breeding'],['lmpreg','breeding'],
        ['impreg','breeding'],['forced breeding','breeding'],
        ['baby making','breeding'],['starting a family','breeding'],
        ['thinking about baby names','breeding'],
        ['make me a mommy','breeding'],['future baby mama','breeding'],
        // â”€ Kissing â”€
        ['kissing','kissing'],['making out','kissing'],
        ['making out','kissing'],['lots of kissing','kissing'],
        ['sloppy kisses','kissing'],['slow kisses','kissing'],
        ['deep kissing','kissing'],['french kissing','kissing'],
        ['neck kissing','kissing'],['aggressive kissing','kissing'],
        ['lap kisses','kissing'],
        // â”€ Degradation â”€
        ['degradation','degradation'],['degradating','degradation'],
        ['degrading','degradation'],['self degradation','degradation'],
        ['self-degradation','degradation'],['light self degredation','degradation'],
        ['verbal abuse','degradation'],['belittling','degradation'],
        ['humiliation','degradation'],['mocking','degradation'],
        ['insults','degradation'],['body shaming','degradation'],
        // â”€ Praise â”€
        ['praise','praise'],['praise kink','praise'],
        ['praises','praise'],['good boy','praise'],
        ['good boys','praise'],['lots of good boy','praise'],
        ['lots of good boys','praise'],['good boy','praise'],
        ['calling you cute','praise'],['calling you names','praise'],
        // â”€ GFE â”€
        ['gfe','gfe'],['girlfriend experience','gfe'],
        ['wife experience','gfe'],['domestic','gfe'],
        ['established relationship','gfe'],['cozy','gfe'],
        // â”€ Femdom / Fdom â”€
        ['fdom','fdom'],['femdom','fdom'],['female domination','fdom'],
        ['dommy mommy','fdom'],['gentle femdom','fdom'],
        ['gentle fdom','fdom'],['harsh fdom','fdom'],
        ['mean fdom','fdom'],['soft fdom','fdom'],
        ['loving fdom','fdom'],['strict femdom','fdom'],
        ['gfd','fdom'],
        // â”€ Yandere / obsessive â”€
        ['yandere','yandere'],['obsessed','yandere'],
        ['obsessed with you','yandere'],['stalker','yandere'],
        ['tsundere into yandere','yandere'],
        // â”€ Riding / cowgirl â”€
        ['riding','riding'],['cowgirl','riding'],
        ['cowgirl position','riding'],['girl on top','riding'],
        ['woman on top','riding'],['reverse amazon position','riding'],
        ['ride you','riding'],['riding your cock','riding'],
        // â”€ Doggystyle â”€
        ['doggystyle','doggystyle'],['doggy style','doggystyle'],
        ['doggy','doggystyle'],['face down ass up','doggystyle'],
        ['head down ass up','doggystyle'],['prone bone','doggystyle'],
        ['pronebone','doggystyle'],
        // â”€ Spanking â”€
        ['spanking','spanking'],['spank','spanking'],
        ['ass slapping','spanking'],['ass smacking','spanking'],
        ['slap','spanking'],['slapping','spanking'],
        ['face slaps','spanking'],['ass play','spanking'],
        // â”€ Bondage / restraint â”€
        ['bondage','bondage'],['tied up','bondage'],
        ['chained up','bondage'],['chasity','bondage'],
        ['pinned','bondage'],['pinned down','bondage'],
        // â”€ Size â”€
        ['big cock','size'],['big dick','size'],['big cock worship','size'],
        ['size mention','size'],['size mentions','size'],
        ['size difference','size'],['size play','size'],
        ['size kink','size'],['size queen','size'],
        ['raw cock','size'],['stretch out my pussy with your huge dick','size'],
        // â”€ Orgasm denial / edging â”€
        ['orgasm denial','denial'],['denial','denial'],
        ['edging','denial'],['no stopping','denial'],
        ['denial slut','denial'],
        // â”€ Overstimulation â”€
        ['overstimulation','overstim'],['overstim','overstim'],
        ['overstimulated','overstim'],['uncontrollable orgasm','overstim'],
        ['multiple orgasms','overstim'],['endless multiple orgasms','overstim'],
        // â”€ Mommy dom â”€
        ['mommy','mommydom'],['mommydom','mommydom'],
        ['mommy dom','mommydom'],['mommy domme','mommydom'],
        ['dommy mommy','mommydom'],['mdlb','mommydom'],
        ['ddlg','mommydom'],['dd/lg','mommydom'],
        // â”€ ASMR / soft â”€
        ['asmr','asmr'],['soft spoken','asmr'],
        ['whispering','asmr'],['ear nibbling','asmr'],
        ['sleep aid','asmr'],['relaxing','asmr'],
        ['soothing','asmr'],['sleep relief','asmr'],
        // â”€ Tsundere / brat â”€
        ['tsundere','tsundere'],['brat','tsundere'],
        ['brat taming','tsundere'],['bratty','tsundere'],
        ['bratty fsub','tsundere'],['dorky and bratty','tsundere'],
        ['tombrat','tsundere'],
        // â”€ CNC / noncon â”€
        ['cnc','cnc'],['noncon','cnc'],['dub con','cnc'],
        ['dubcon','cnc'],['rape','cnc'],['noncon','cnc'],
    ];
    pairs.forEach(([variant, canonical]) => {
        m[normKey(variant)] = canonical;
    });
    return m;
})();

/**
 * SEMANTIC CLUSTERS: related concepts that should surface together.
 * Each key is a canonical tag; its array lists related canonicals.
 */
const CLUSTERS = {
    // â”€ Oral sex (giving BJ) â”€
    blowjob:    ['deepthroat','facefuck','throatpie','oral fixation','cock worship','slurping','sucking while yapping','softsuck','doesnt stop sucking','gluck'],
    deepthroat: ['blowjob','facefuck','throatpie','cock worship','oral','slurping'],
    facefuck:   ['blowjob','deepthroat','throatpie','face riding','rough'],
    throatpie:  ['blowjob','deepthroat','facefuck','cum swallowing','cum in mouth'],

    // â”€ Oral (receiving) â”€
    cunnilingus:['pussy worship','face riding','breast sucking','fingering','teasing'],
    'pussy worship':['cunnilingus','face riding','breast sucking','licking'],

    // â”€ Breeding / impreg â”€
    breeding:   ['creampie','impregnation','cum inside','ovulation','fill me up','baby making','starting a family'],
    creampie:   ['breeding','cum inside','fill me up','multiple creampies','risky creampie'],

    // â”€ Riding â”€
    riding:     ['doggystyle','mating press','cowgirl','woman on top','grinding','seated sex'],
    doggystyle: ['riding','prone bone','face down ass up','rough','mating press'],

    // â”€ Degradation â”€
    degradation:['humiliation','verbal abuse','belittling','mocking','insults','body shaming','sph','self degradation'],
    humiliation:['degradation','sph','mocking','verbal abuse','small penis humiliation'],

    // â”€ Praise â”€
    praise:     ['good boy','encouragement','affectionate','loving','soft','gentle femdom'],
    'good boy': ['praise','encouragement','affectionate','nurturing','mommy dom'],

    // â”€ Femdom â”€
    fdom:       ['gentle femdom','harsh fdom','mean fdom','dommy mommy','mommydom','soft fdom','brat taming'],
    mommydom:   ['fdom','ddlg','mdlb','nursing handjob','lactation','breast feeding','praise'],

    // â”€ Yandere / obsessive â”€
    yandere:    ['stalker','obsessed','possessive','tsundere','dark romance','unhinged','kidnapping'],
    stalker:    ['yandere','obsessed','possessive','kidnapping','blackmail'],

    // â”€ Brat / tsundere â”€
    tsundere:   ['brat taming','bratty','enemies to lovers','rivals','arguing','hate fucking'],
    'brat taming':['tsundere','bratty','rough','degradation','punishment'],

    // â”€ Bondage / restraint â”€
    bondage:    ['tied up','chained up','pinned down','restraint','punishment','knifeplay','control'],

    // â”€ Spanking â”€
    spanking:   ['ass slapping','slapping','rough','degradation','punishment','brat taming'],

    // â”€ Size â”€
    size:       ['big cock','doggystyle','mating press','rough','pussy stretching','size difference'],
    'big cock': ['size','mating press','rough','doggystyle','pussy stretching'],

    // â”€ Orgasm denial â”€
    denial:     ['edging','teasing','overstim','countdown','no stopping','orgasm control'],
    overstim:   ['denial','teasing','multiple orgasms','countdown','forced orgasm'],

    // â”€ GFE / comfort â”€
    gfe:        ['established relationship','domestic','cuddling','aftercare','wholesome','soft','asmr'],
    asmr:       ['soft spoken','whispering','gfe','sleep aid','relaxing','ear nibbling','gentle'],

    // â”€ Kissing / intimacy â”€
    kissing:    ['making out','neck kissing','french kissing','sloppy kisses','slow burn','intimate','gfe'],
    'making out':['kissing','grinding','teasing','slow burn','intimate'],

    // â”€ Creampie / cum â”€
    'cum swallowing':['throatpie','blowjob','deepthroat','cum fetish','gulping'],
    'cum fetish': ['cum swallowing','throatpie','breeding','creampie','gulping'],

    // â”€ Rough sex â”€
    rough:      ['doggystyle','bondage','spanking','degradation','brat taming','face fuck','pinned down','hate fucking'],
    'hate fucking':['enemies to lovers','tsundere','rough','degradation','arguing'],
    'enemies to lovers':['hate fucking','tsundere','rivals','slow burn','arguing','brat taming'],

    // â”€ Fingering â”€
    fingering:  ['cunnilingus','pussy eating','teasing','orgasm denial','edging','masturbation'],

    // â”€ Lactation â”€
    lactation:  ['breast feeding','breast sucking','nursing handjob','mommydom','breast play'],
    'breast sucking':['lactation','breast feeding','nipple play','nursing','mommydom'],

    // â”€ Japanese / bilingual â”€
    japanese:   ['bilingual','japanese','bilingual/japanese','japanese/bilingual','dual-lingual','full japanese audio'],

    // â”€ Friends to lovers / romance â”€
    'friends to lovers':['slow burn','confession','childhood friends to lovers','established relationship','roommates to lovers'],
    'slow burn': ['friends to lovers','confession','enemies to lovers','romantic','longing'],

    // â”€ SFW / emotional â”€
    sfw:        ['comfort','heartfelt','romantic','wholesome','emotional','soft','platonic','support'],
    comfort:    ['sfw','aftercare','reassurance','support','heartfelt','wholesome'],
    aftercare:  ['comfort','gfe','cuddling','reassurance','wholesome'],
};

/**
 * Resolve a query string to its canonical form via SYNONYMS.
 */
function resolveQuery(q) {
    const key = normKey(q);
    return SYNONYMS[key] || key;
}

/**
 * Get all related normalized keys for a query (its cluster peers).
 * Cluster values are normalized so comparison is apples-to-apples.
 */
function getRelatedCanonicals(canonical) {
    const raw = CLUSTERS[canonical] || [];
    return new Set(raw.map(normKey));
}

/**
 * Check if a single tag matches a canonical query (exact or synonym).
 */
function tagMatchesPrimary(tag, canonical) {
    const k = normKey(tag);
    const resolved = SYNONYMS[k] || k;
    return resolved === canonical || k === canonical;
}

/**
 * Check if a tag matches any of the related canonicals.
 * Both tag and set values are normalized keys.
 */
function tagMatchesRelated(tag, relatedSet) {
    if (!relatedSet.size) return false;
    const k = normKey(tag);
    const resolved = SYNONYMS[k] || k;
    return relatedSet.has(resolved) || relatedSet.has(k);
}

/* â”€â”€ FILTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
// Returns { primary: [...], related: [...] }
function doSmartSearch(list, rawQuery) {
    const canonical = resolveQuery(rawQuery);
    const related   = getRelatedCanonicals(canonical);

    const primary = [];
    const secondary = [];

    for (const a of list) {
        const tags  = a.tags  || [];
        const title = (a.title    || '').toLowerCase();
        const syn   = (a.synopsis || '').toLowerCase();
        const q     = rawQuery.toLowerCase().trim();

        // â”€â”€ Primary: exact title/synopsis match OR normalized tag match â”€â”€
        const titleMatch   = title.includes(q);
        const synMatch     = syn.includes(q);
        const tagPrimary   = tags.some(t => tagMatchesPrimary(t, canonical));

        if (titleMatch || synMatch || tagPrimary) {
            primary.push(a);
            continue;
        }

        // â”€â”€ Related: same cluster â”€â”€
        if (related.size && tags.some(t => tagMatchesRelated(t, related))) {
            secondary.push(a);
        }
    }

    return { primary, secondary };
}

function doFilter() {
    let list = [...state.audios];
    if (state.currentType !== 'all')
        list = list.filter(a => resolveType(a) === state.currentType);
    if (state.showFavOnly)
        list = list.filter(a => isFav(a.id));
    return doSort(list);
}

/* â”€â”€ COUNTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function updateCounts() {
    $('count-all').textContent = state.audios.length;
    ['fsub','fdom','fswitch','yandere','sfw','karaoke','ramblefap','romantic','collab'].forEach(t => {
        const el = $(`count-${t}`);
        if (el) el.textContent = state.audios.filter(a => resolveType(a) === t).length;
    });
}

/* â”€â”€ RANDOM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function goRandom() {
    const pool = state.audios.filter(a => a.audioLink);
    if (!pool.length) return;
    const pick = pool[Math.floor(Math.random() * pool.length)];
    window.open(pick.audioLink, '_blank', 'noopener noreferrer');
}

/* â”€â”€ LOAD DATA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
async function loadAudios() {
    dom.grid.innerHTML = `<div class="loading-state"><div class="loading-spinner"></div><p>Loading audio collectionâ€¦</p></div>`;
    try {
        const resp = await fetch(CONFIG.dataPath);
        if (!resp.ok) throw new Error(`HTTP ${resp.status}`);
        const data = await resp.json();
        state.audios = data.audios || [];
        updateCounts();
        renderAudios();
    } catch(e) {
        dom.grid.innerHTML = `
            <div class="error-state">
                <div class="error-icon">âš ï¸</div>
                <h3 class="error-title">Failed to Load Audios</h3>
                <p>${esc(e.message)}</p>
                <button class="retry-btn" onclick="loadAudios()">Try Again</button>
            </div>`;
    }
}

/* â”€â”€ HTML BUILDERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function buildTags(tags) {
    const max = 5, total = tags.length;
    let html = tags.map((t,i) =>
        `<span class="tag${i>=max?' hidden':''}" onclick="event.stopPropagation();tagSearch('${esc(t).replace(/'/g,"&#39;")}')">${esc(t)}</span>`
    ).join('');
    if (total > max)
        html += `<button class="tag-expand-btn" onclick="event.stopPropagation();toggleTags(this)" data-expanded="false">+${total-max} more</button>`;
    return html;
}

function buildMeta(audio) {
    const parts = [];
    if (audio.duration)
        parts.push(`<span class="meta-item">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>${esc(audio.duration)}</span>`);
    if (audio.date) {
        const fd = new Date(audio.date).toLocaleDateString('en-GB',{day:'numeric',month:'short',year:'numeric'});
        parts.push(`<span class="meta-item">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
            </svg>${fd}</span>`);
    }
    return parts.length ? `<div class="card-meta">${parts.join('')}</div>` : '';
}

function buildCredits(audio) {
    // Large collabs skip individual credits and show a notice instead
    if (audio.largeCollab) {
        const link = audio.audioLink
            ? `<a href="${esc(audio.audioLink)}" target="_blank" rel="noopener" onclick="event.stopPropagation()">reddit post</a>`
            : 'the reddit post';
        return `<div class="large-collab-notice">ğŸ™ï¸ This collab has <strong>A LOT</strong> of people involved! Check all involved in the ${link}!</div>`;
    }

    const parts = [];
    if (audio.writer?.name) {
        const name = audio.writer.link
            ? `<a href="${esc(audio.writer.link)}" target="_blank" rel="noopener" onclick="event.stopPropagation()">${esc(audio.writer.name)}</a>`
            : esc(audio.writer.name);
        parts.push(`<span class="credit-item">âœï¸ Script by ${name}</span>`);
    }
    if (audio.editor?.name) {
        const name = audio.editor.link
            ? `<a href="${esc(audio.editor.link)}" target="_blank" rel="noopener" onclick="event.stopPropagation()">${esc(audio.editor.name)}</a>`
            : esc(audio.editor.name);
        parts.push(`<span class="credit-item">âœ‚ï¸ Edited by ${name}</span>`);
    }
    if (audio.collabs?.length) {
        const names = audio.collabs.map(c =>
            c.link ? `<a href="${esc(c.link)}" target="_blank" rel="noopener" onclick="event.stopPropagation()">${esc(c.name)}</a>` : esc(c.name)
        ).join(', ');
        parts.push(`<span class="credit-item">ğŸ™ï¸ Collab with ${names}</span>`);
    }
    return parts.length ? `<div class="card-credits">${parts.join('')}</div>` : '';
}

function buildButtons(audio) {
    let html = '';
    if (audio.audioLink)
        html += `<a href="${esc(audio.audioLink)}" class="card-link card-link-primary" target="_blank" rel="noopener noreferrer" onclick="event.stopPropagation()">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"/>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>Listen Now</a>`;
    if (audio.scriptLink)
        html += `<a href="${esc(audio.scriptLink)}" class="card-link card-link-secondary" target="_blank" rel="noopener noreferrer" onclick="event.stopPropagation()">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
            </svg>View Script</a>`;
    if (!audio.audioLink && !audio.scriptLink)
        html += `<span class="card-link card-link-disabled">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>Coming Soon</span>`;
    return html;
}

function buildTypeBadge(audio) {
    const t = resolveType(audio);
    const label = CONFIG.typeLabels[t] || 'Other';
    const emoji = CONFIG.typeEmoji[t]  || 'ğŸ”®';
    return `<span class="type-badge type-${t}">${emoji} ${label}</span>`;
}

/* â”€â”€ SYNOPSIS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
// Threshold: if synopsis is longer than ~220 chars it gets clamped
const SYNOPSIS_CLAMP_THRESHOLD = 220;

function buildSynopsis(text, id) {
    const needsClamp = text.length > SYNOPSIS_CLAMP_THRESHOLD;
    const clampClass = needsClamp ? ' clamped' : '';
    const btn = needsClamp
        ? `<button class="synopsis-toggle" onclick="event.stopPropagation();toggleSynopsis(this)" aria-expanded="false">
               â–¾ Read more
           </button>`
        : '';
    return `<p class="card-synopsis${clampClass}" style="margin-bottom:${needsClamp?'0':'0.9rem'}">${esc(text)}</p>${btn}`;
}

function toggleSynopsis(btn) {
    const p = btn.previousElementSibling;
    const isExpanded = btn.getAttribute('aria-expanded') === 'true';
    if (isExpanded) {
        p.classList.add('clamped');
        btn.textContent = 'â–¾ Read more';
        btn.setAttribute('aria-expanded', 'false');
        btn.style.marginBottom = '0.9rem';
    } else {
        p.classList.remove('clamped');
        btn.textContent = 'â–´ Show less';
        btn.setAttribute('aria-expanded', 'true');
        btn.style.marginBottom = '0.9rem';
    }
}

/* â”€â”€ CREATE CARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function createCard(audio, i, isRelated=false) {
    const fav = isFav(audio.id);
    return `
    <article class="audio-card${isRelated?' card-related':''}" style="animation-delay:${i*0.04}s">
        <div class="card-header">
            ${buildTypeBadge(audio)}
            <button class="card-favorite-btn${fav?' favorited':''}"
                onclick="event.stopPropagation();toggleFav(${audio.id})"
                title="${fav?'Remove from favourites':'Add to favourites'}">
                <svg xmlns="http://www.w3.org/2000/svg" fill="${fav?'var(--wisteria)':'none'}" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                </svg>
            </button>
        </div>
        <div class="card-content">
            <h3 class="card-title">${esc(audio.title)}</h3>
            <div class="card-tags">${buildTags(audio.tags||[])}</div>
            ${audio.synopsis ? buildSynopsis(audio.synopsis, audio.id) : ''}
            ${buildMeta(audio)}
            ${buildCredits(audio)}
            <hr class="card-divider">
            <div class="card-buttons">${buildButtons(audio)}</div>
        </div>
    </article>`;
}

/* â”€â”€ RENDER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function renderAudios() {
    const base = doFilter();

    if (!state.searchQuery.trim()) {
        // No search â€” just show all filtered
        if (!base.length) {
            dom.grid.innerHTML = `
                <div class="empty-state">
                    <div class="empty-icon">ğŸŒ¸</div>
                    <h3 class="empty-title">No Audios Found</h3>
                    <p>Try adjusting your filters.</p>
                </div>`;
        } else {
            dom.grid.innerHTML = base.map((a,i) => createCard(a,i)).join('');
        }
        const n = base.length;
        dom.resCnt.textContent = `Showing ${n} ${n===1?'audio':'audios'}`;
        return;
    }

    // Smart search active
    const { primary, secondary } = doSmartSearch(base, state.searchQuery.trim());

    if (!primary.length && !secondary.length) {
        dom.grid.innerHTML = `
            <div class="empty-state">
                <div class="empty-icon">ğŸŒ¸</div>
                <h3 class="empty-title">No Audios Found</h3>
                <p>Try a different tag or keyword.</p>
            </div>`;
        dom.resCnt.textContent = `0 audios`;
        return;
    }

    // Build the canonical label for the divider
    const canonical = resolveQuery(state.searchQuery.trim());
    const relatedLabel = CLUSTERS[canonical]
        ? CLUSTERS[canonical].slice(0,3).join(', ')
        : 'related tags';

    let html = primary.map((a,i) => createCard(a,i)).join('');

    if (secondary.length) {
        html += `
        <div class="related-divider">
            <span class="related-divider-label">âœ¦ Also related to "${relatedLabel}" âœ¦</span>
        </div>`;
        html += secondary.map((a,i) => createCard(a, primary.length + i, true)).join('');
    }

    dom.grid.innerHTML = html;
    const total = primary.length + secondary.length;
    dom.resCnt.textContent = `${primary.length} direct Â· ${secondary.length} related`;
}

/* â”€â”€ TYPE SWITCH â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function setType(type) {
    state.currentType = type;
    dom.navItems.forEach(item => item.classList.toggle('active', item.dataset.type === type));
    dom.secTitle.textContent = CONFIG.typeLabels[type] || 'All Audios';
    renderAudios();
}

/* â”€â”€ VIEW â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function setView(v) {
    state.currentView = v;
    localStorage.setItem('pj_view', v);
    dom.viewBtns.forEach(b => b.classList.toggle('active', b.dataset.view === v));
    dom.grid.className = `audios-grid view-${v}`;
}

/* â”€â”€ TAG SEARCH â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function tagSearch(tag) {
    dom.search.value = tag;
    state.searchQuery = tag;
    renderAudios();
}

/* â”€â”€ TOGGLE TAGS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function toggleTags(btn) {
    const container = btn.parentElement;
    const isExpanded = btn.dataset.expanded === 'true';
    if (isExpanded) {
        container.querySelectorAll('.tag').forEach((t,i) => { if(i>=5) t.classList.add('hidden'); });
        btn.textContent = `+${container.querySelectorAll('.tag').length - 5} more`;
        btn.dataset.expanded = 'false';
    } else {
        container.querySelectorAll('.tag.hidden').forEach(t => t.classList.remove('hidden'));
        btn.textContent = 'Show less';
        btn.dataset.expanded = 'true';
    }
}

/* â”€â”€ AGE GATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function verifyAge() {
    sessionStorage.setItem('pj_verified','1');
    $('ageOverlay').classList.add('hidden');
}
if (sessionStorage.getItem('pj_verified')==='1') $('ageOverlay').classList.add('hidden');

/* â”€â”€ ACCESSIBILITY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const a11yState = {
    fontSize: parseInt(localStorage.getItem('pj_fontSize'))||16,
    fontType: localStorage.getItem('pj_fontType')||'default',
};
const fontSizes = [12,14,16,18,20,22,24,28,32];

function applyFontSize(s) {
    a11yState.fontSize = s;
    localStorage.setItem('pj_fontSize', s);
    $('fontSizeDisplay').textContent = s;
    document.documentElement.style.fontSize = s+'px';
}
function applyFontType(t) {
    a11yState.fontType = t;
    localStorage.setItem('pj_fontType', t);
    document.body.classList.remove('font-arial','font-times','font-atkinson','font-dyslexic');
    if (t !== 'default') document.body.classList.add('font-'+t);
    document.querySelectorAll('.font-type-btn').forEach(b => b.classList.toggle('active', b.dataset.font===t));
}

function initA11y() {
    const overlay = $('a11yOverlay'), panel = $('a11yPanel');
    const open  = () => { panel.classList.add('open');    overlay.classList.add('open');    };
    const close = () => { panel.classList.remove('open'); overlay.classList.remove('open'); };
    $('a11yBtn').addEventListener('click', open);
    $('a11yClose').addEventListener('click', close);
    overlay.addEventListener('click', close);
    $('fontDecrease').addEventListener('click', () => {
        const i = fontSizes.indexOf(a11yState.fontSize);
        if (i>0) applyFontSize(fontSizes[i-1]);
    });
    $('fontIncrease').addEventListener('click', () => {
        const i = fontSizes.indexOf(a11yState.fontSize);
        if (i<fontSizes.length-1) applyFontSize(fontSizes[i+1]);
    });
    document.querySelectorAll('.font-type-btn').forEach(b => b.addEventListener('click', () => applyFontType(b.dataset.font)));
    $('a11yReset').addEventListener('click', () => { applyFontSize(16); applyFontType('default'); });
    applyFontSize(a11yState.fontSize);
    applyFontType(a11yState.fontType);
}

/* â”€â”€ GEO BACKGROUND â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
/* â”€â”€ SAKURA TREE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function drawGeo() {
    const c = $('geoCanvas'), ctx = c.getContext('2d');
    c.width = window.innerWidth; c.height = window.innerHeight;
    const W = c.width, H = c.height;

    // â”€â”€ Seeded RNG for a consistent tree shape every draw â”€â”€
    let _s = 20250220;
    function rng() {
        _s ^= _s << 13; _s ^= _s >> 17; _s ^= _s << 5;
        return ((_s >>> 0) / 0xffffffff);
    }

    // â”€â”€ Draw a single stylised 5-petal flower â”€â”€
    function flower(x, y, r, petalCol, centerCol) {
        for (let p = 0; p < 5; p++) {
            const a = (p / 5) * Math.PI * 2 - Math.PI / 2;
            ctx.beginPath();
            ctx.ellipse(
                x + Math.cos(a) * r * 0.72,
                y + Math.sin(a) * r * 0.72,
                r * 0.55, r * 0.38,
                a, 0, Math.PI * 2
            );
            ctx.fillStyle = petalCol;
            ctx.fill();
        }
        ctx.beginPath();
        ctx.arc(x, y, r * 0.28, 0, Math.PI * 2);
        ctx.fillStyle = centerCol;
        ctx.fill();
    }

    // â”€â”€ Draw a blossom cloud at a branch tip â”€â”€
    function blossomCloud(x, y, size) {
        const n = Math.floor(4 + rng() * 5);
        for (let i = 0; i < n; i++) {
            const ox = (rng() - 0.5) * size * 2.2;
            const oy = (rng() - 0.5) * size * 2.2;
            const cr = size * (0.55 + rng() * 0.6);

            // Soft glow blob
            const grad = ctx.createRadialGradient(x+ox, y+oy, 0, x+ox, y+oy, cr * 1.6);
            grad.addColorStop(0,   'rgba(255,210,240,0.17)');
            grad.addColorStop(0.4, 'rgba(216,180,255,0.12)');
            grad.addColorStop(0.7, 'rgba(196,181,253,0.07)');
            grad.addColorStop(1,   'rgba(167,139,250,0)');
            ctx.beginPath();
            ctx.arc(x+ox, y+oy, cr * 1.6, 0, Math.PI * 2);
            ctx.fillStyle = grad;
            ctx.fill();

            // Dense petal mass underneath
            for (let b = 0; b < 4; b++) {
                const bx = x+ox + (rng()-0.5)*cr*1.1;
                const by = y+oy + (rng()-0.5)*cr*1.1;
                ctx.beginPath();
                ctx.arc(bx, by, cr*(0.35+rng()*0.4), 0, Math.PI*2);
                const cols = [
                    'rgba(255,215,240,0.19)',
                    'rgba(235,195,255,0.17)',
                    'rgba(210,180,255,0.15)',
                    'rgba(255,230,250,0.14)',
                ];
                ctx.fillStyle = cols[Math.floor(rng()*cols.length)];
                ctx.fill();
            }

            // A few individual flowers scattered in the cloud
            const nf = Math.floor(2 + rng() * 4);
            for (let f = 0; f < nf; f++) {
                const fx = x+ox + (rng()-0.5)*cr*1.5;
                const fy = y+oy + (rng()-0.5)*cr*1.5;
                const fr = 4 + rng() * 5;
                const rotated = rng() * Math.PI * 2;
                ctx.save();
                ctx.translate(fx, fy);
                ctx.rotate(rotated);
                flower(0, 0, fr, 'rgba(255,220,245,0.38)', 'rgba(255,245,200,0.45)');
                ctx.restore();
            }
        }
    }

    // â”€â”€ Recursive branch drawing â”€â”€
    function branch(x, y, angle, len, width, depth, maxDepth) {
        const curve = (rng() - 0.5) * 0.28;
        const x2 = x + Math.cos(angle) * len;
        const y2 = y + Math.sin(angle) * len;
        const cpx = (x+x2)/2 + Math.cos(angle + Math.PI/2) * len * curve;
        const cpy = (y+y2)/2 + Math.sin(angle + Math.PI/2) * len * curve;

        ctx.beginPath();
        ctx.moveTo(x, y);
        ctx.quadraticCurveTo(cpx, cpy, x2, y2);
        ctx.lineWidth  = Math.max(width, 0.8);
        ctx.lineCap    = 'round';
        ctx.lineJoin   = 'round';
        ctx.strokeStyle = `rgba(18,7,16,${Math.max(0.52 - depth * 0.06, 0.1)})`;
        ctx.stroke();

        if (depth >= maxDepth) {
            blossomCloud(x2, y2, 16 + rng() * 14);
            return;
        }

        const numSplits = (rng() > 0.28) ? 3 : 2;
        const spreadBase = 0.38 + rng() * 0.22;
        for (let i = 0; i < numSplits; i++) {
            const frac = i / (numSplits - 1);                       // 0 â€¦ 1
            const spread = (frac - 0.5) * 2 * spreadBase;
            const lenR = 0.58 + rng() * 0.22;
            const wR   = 0.60 + rng() * 0.08;
            branch(x2, y2, angle + spread + (rng()-0.5)*0.12,
                   len*lenR, width*wR, depth+1, maxDepth);
        }
    }

    // â”€â”€ Compose the tree â”€â”€
    // Root: bottom-left quadrant, leaning gently right â€” classic ukiyo-e placement
    const rootX  = W * 0.14;
    const rootY  = H + 15;
    const treeH  = H * 0.60;
    const trkTop = { x: rootX + W*0.035, y: rootY - treeH };

    // Trunk â€” thick brushstroke feel with a highlight streak
    ctx.lineCap = 'round';
    ctx.lineJoin = 'round';

    // Outer body
    ctx.beginPath();
    ctx.moveTo(rootX - 26, rootY);
    ctx.bezierCurveTo(
        rootX - 20, rootY - treeH * 0.38,
        trkTop.x + 14, rootY - treeH * 0.72,
        trkTop.x, trkTop.y
    );
    ctx.lineWidth   = 52;
    ctx.strokeStyle = 'rgba(14,5,12,0.62)';
    ctx.stroke();

    // Subtle inner highlight
    ctx.beginPath();
    ctx.moveTo(rootX - 6, rootY);
    ctx.bezierCurveTo(
        rootX - 2, rootY - treeH * 0.36,
        trkTop.x + 24, rootY - treeH * 0.68,
        trkTop.x + 8, trkTop.y
    );
    ctx.lineWidth   = 16;
    ctx.strokeStyle = 'rgba(55,18,45,0.20)';
    ctx.stroke();

    // Exposed root flare (ground connection)
    for (let r = 0; r < 3; r++) {
        const ra = -Math.PI/2 + Math.PI/4 + r*0.28 + (rng()-0.5)*0.2;
        ctx.beginPath();
        ctx.moveTo(rootX - 10 + r*8, rootY);
        ctx.quadraticCurveTo(
            rootX - 10 + r*8 + Math.cos(ra)*40,
            rootY + Math.sin(ra)*30,
            rootX - 20 + r*18 + Math.cos(ra)*70,
            rootY + 18
        );
        ctx.lineWidth   = 18 - r*4;
        ctx.strokeStyle = 'rgba(12,5,10,0.38)';
        ctx.stroke();
    }

    // â”€â”€ Main branches from top of trunk â”€â”€
    const bx = trkTop.x, by = trkTop.y;
    const up = -Math.PI / 2;

    branch(bx, by, up - 0.62, treeH*0.34, 19, 1, 5); // far left
    branch(bx, by, up - 0.22, treeH*0.38, 17, 1, 5); // left-centre
    branch(bx, by, up + 0.18, treeH*0.32, 16, 1, 5); // right-centre
    branch(bx, by, up + 0.55, treeH*0.28, 14, 1, 4); // far right (shorter)

    // A mid-trunk side branch (feels organic / asymmetric)
    const midX = rootX - 8;
    const midY = rootY - treeH * 0.50;
    branch(midX, midY, up + 0.85, treeH*0.20, 11, 1, 4);

    // â”€â”€ Subtle ambient ground glow under tree â”€â”€
    const grd = ctx.createRadialGradient(rootX, rootY, 0, rootX, rootY, W*0.22);
    grd.addColorStop(0,   'rgba(109,40,217,0.07)');
    grd.addColorStop(0.5, 'rgba(74,31,168,0.04)');
    grd.addColorStop(1,   'rgba(0,0,0,0)');
    ctx.beginPath();
    ctx.ellipse(rootX, rootY, W*0.22, H*0.10, 0, 0, Math.PI*2);
    ctx.fillStyle = grd;
    ctx.fill();
}
window.addEventListener('resize', drawGeo);

/* â”€â”€ SAKURA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function spawnPetals() {
    const container = $('sakuraContainer');

    // 5-petal SVG flower â€” colours cycle through pinkâ†”purple palette
    const petalPalettes = [
        { fill:'rgba(255,200,230,0.55)', stroke:'rgba(230,160,210,0.4)'  },  // soft pink
        { fill:'rgba(220,180,255,0.50)', stroke:'rgba(190,140,245,0.38)' },  // wisteria
        { fill:'rgba(245,215,250,0.48)', stroke:'rgba(200,170,240,0.35)' },  // pale lilac
        { fill:'rgba(255,225,245,0.45)', stroke:'rgba(210,155,220,0.35)' },  // blush
        { fill:'rgba(196,181,253,0.52)', stroke:'rgba(167,139,250,0.4)'  },  // lavender
    ];

    function makePetalSVG(pal, sz) {
        // Build a 5-petal path centred at 50,50 in a 100Ã—100 viewBox
        const r = 32, cr = 14;   // petal reach, petal width (ellipse b-radius)
        let petals = '';
        for (let p = 0; p < 5; p++) {
            const a = (p / 5) * Math.PI * 2 - Math.PI / 2;
            const cx = 50 + Math.cos(a) * r * 0.72;
            const cy = 50 + Math.sin(a) * r * 0.72;
            const rot = (a * 180 / Math.PI);
            petals += `<ellipse cx="${cx.toFixed(1)}" cy="${cy.toFixed(1)}" rx="${r*0.55}" ry="${cr}" `
                    + `transform="rotate(${rot.toFixed(1)},${cx.toFixed(1)},${cy.toFixed(1)})" `
                    + `fill="${pal.fill}" stroke="${pal.stroke}" stroke-width="0.8"/>`;
        }
        return `<svg xmlns="http://www.w3.org/2000/svg" width="${sz}" height="${sz}" viewBox="0 0 100 100">`
             + petals
             + `<circle cx="50" cy="50" r="9" fill="rgba(255,240,200,0.55)" stroke="rgba(240,210,160,0.4)" stroke-width="0.8"/>`
             + `</svg>`;
    }

    for (let i = 0; i < 22; i++) {
        const sz  = 10 + Math.random() * 13;         // 10â€“23 px
        const pal = petalPalettes[Math.floor(Math.random() * petalPalettes.length)];
        const dur = 11 + Math.random() * 16;          // 11â€“27 s
        const del = Math.random() * 18;               // staggered start
        const drift = (Math.random() - 0.5) * 120;   // horizontal drift px

        const wrapper = document.createElement('div');
        wrapper.style.cssText = [
            `position:absolute`,
            `top:-${sz + 10}px`,
            `left:${Math.random() * 100}%`,
            `width:${sz}px`,
            `height:${sz}px`,
            `animation:petalFall ${dur}s ${del}s linear infinite`,
            `--drift:${drift}px`,
            `transform-origin:center`,
        ].join(';');
        wrapper.innerHTML = makePetalSVG(pal, sz);
        container.appendChild(wrapper);
    }
}

/* â”€â”€ EVENTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function initEvents() {
    dom.navItems.forEach(item => item.addEventListener('click', () => setType(item.dataset.type)));
    const debouncedSearch = debounce(v => { state.searchQuery=v; renderAudios(); }, 200);
    dom.search.addEventListener('input', e => debouncedSearch(e.target.value));
    dom.search.addEventListener('keydown', e => { if(e.key==='Escape'){dom.search.value='';state.searchQuery='';renderAudios();} });
    dom.sortSel.value = state.sortOrder;
    dom.sortSel.addEventListener('change', e => { state.sortOrder=e.target.value; localStorage.setItem('pj_sort',state.sortOrder); renderAudios(); });
    dom.favBtn.addEventListener('click', () => { state.showFavOnly=!state.showFavOnly; dom.favBtn.classList.toggle('active',state.showFavOnly); renderAudios(); });
    dom.randBtn.addEventListener('click', goRandom);
    dom.viewTgl.addEventListener('click', e => { const b=e.target.closest('.view-btn'); if(b) setView(b.dataset.view); });
}

/* â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function init() {
    drawGeo();
    spawnPetals();
    setView(state.currentView);
    initEvents();
    initA11y();
    loadAudios();
}

document.readyState === 'loading'
    ? document.addEventListener('DOMContentLoaded', init)
    : init();
</script>
</body>
</html>
